"use strict";function productFavoritesHandler(){const e=document.querySelectorAll(".product-favorite");e&&e.forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("is-active")||(e.insertAdjacentHTML("afterbegin","<span></span>"),setTimeout(function(){e.innerHTML=""},1e3)),e.classList.toggle("is-active")})})}function checkForm(e){let t=e.querySelector('[type="submit"]'),i=e.querySelectorAll("[data-check]");i.length>0&&i.forEach(s=>{function a(){countErrors(i)>0?(e.classList.add("is-invalid"),e.classList.remove("is-valid"),t.setAttribute("disabled","disabled")):(e.classList.add("is-valid"),e.classList.remove("is-invalid"),t.removeAttribute("disabled"))}let r=s.closest(".form-group");r?r.classList.add("form-group--need-check"):r=s.closest(".form-checkbox"),s.dataset.error="true",checkInput(r,s,s.value),a(),s.addEventListener("input",e=>{checkInput(r,s,e.target.value),a()})})}function countErrors(e){let t=0;if(e.forEach(e=>{"true"===e.dataset.error&&(t+=1)}),t)return!0}function checkInput(e,t,i){"true"==t.dataset.checkRequired&&("text"==t.type&&i.replace(/\s/g,"").length>0||"checkbox"==t.type&&t.checked)?(e.classList.add("is-valid"),t.dataset.error=!1):(e.classList.remove("is-valid"),t.dataset.error=!0)}function modalFormHandler(e){Fancybox.getInstance().focus();const t=document.getElementById(e),i=t.querySelectorAll("input");checkForm(t),checkEmpty(i);const s=t.querySelectorAll('input[type="password"]');s.length>0&&s.forEach(e=>{let t=e.parentNode.querySelector(".icon-password");t.addEventListener("click",i=>{t.classList.toggle("is-active"),"password"==e.getAttribute("type")?e.setAttribute("type","text"):e.setAttribute("type","password")})})}function checkEmpty(e){e.forEach(e=>{e.addEventListener("input",t=>{t.target.value?e.classList.add("not-empty"):e.classList.remove("not-empty")}),e.value?e.classList.add("not-empty"):e.classList.remove("not-empty")})}function returnReasonHandler(){const e=document.getElementById("return-reason"),t=document.querySelector('[data-action="return-description"]');e&&t&&e.addEventListener("change",()=>{["return-reason-1","return-reason-2","return-reason-3","return-reason-5"].some(t=>t==e.value)?t.classList.remove("is-hidden"):t.classList.add("is-hidden")})}function getProductsCards(){function e(){let e=window.matchMedia||window.msMatchMedia;if(e){let t=e("(pointer:coarse)");return t.matches}return!1}const t=document.querySelectorAll(".product-card");t.length>0&&t.forEach(t=>{function i(e){c.forEach(t=>{t.dataset.colorId==e?t.classList.add("is-active"):t.classList.remove("is-active")})}function s(e){d.forEach(t=>{t.dataset.colorId==e?t.classList.add("is-showed"):t.classList.remove("is-showed")})}function a(e){let t=e.includes("-")?"extra":"main",i=`https://cdn1.moyo.moda/ws/${t}/470x705/${e}`,s=`https://cdn1.moyo.moda/ws/${t}/300x450/${e}`;u[0].setAttribute("srcset",i+".webp"),u[1].setAttribute("srcset",s+".webp"),m.setAttribute("src",i+".jpg")}function r(e,t){l=setTimeout(function(){a(e[t]),t=t==e.length-1?0:t+1,r(e,t)},1e3)}function n(e,t){let i=document.createElement("div");i.classList.add("product-card-slider"),t.forEach(e=>{const t=document.createElement("div");t.classList.add("product-card-slider__item"),t.dataset.imageId=e,t.addEventListener("mouseover",()=>{a(e)}),i.appendChild(t)}),e.appendChild(i)}function o(e){p.href=e?"product/"+e:"product/"+t.dataset.productId}let l,c=t.querySelectorAll(".color-variants__item"),d=t.querySelectorAll(".size-variants__item"),u=t.querySelectorAll(".product-card__pic source"),m=t.querySelector(".product-card__pic img"),p=t.querySelector(".product-card__link");t.addEventListener("mouseover",d=>{(d.target.classList.contains("size-variants__item")||d.target.classList.contains("product-price__base")||d.target.classList.contains("product-price__discount")||d.target.classList.contains("product-price__date")||d.target.classList.contains("product-price__profit")||d.target.classList.contains("product-price__old")||d.target.classList.contains("product-price__opt")||d.target.classList.contains("product-price__row")||d.target.classList.contains("product-card__price")||d.target.classList.contains("product-card__title")||d.target.classList.contains("product-card__subtitle")||d.target.classList.contains("product-card__favorite")||d.target.classList.contains("product-card-slider__item")||d.target.classList.contains("product-card__info")||d.target.classList.contains("product-card__extra")||d.target.classList.contains("product-card__extra-wrapper")||d.target.classList.contains("product-card__colors")||d.target.classList.contains("product-card__sizes")||""==d.target.classList.value)&&(i(t.dataset.productId),s(t.dataset.productId),a(t.dataset.productId),o(t.dataset.productId),clearTimeout(l)),d.target.classList.contains("product-card__link")&&!e()&&n(d.target,c[0].dataset.images.replace(/\s/g,"").split(",")),(d.target.classList.contains("product-card__header")||d.target.classList.contains("product-card__title")||d.target.classList.contains("product-card__subtitle"))&&e()&&d.target.addEventListener("click",e=>{e.preventDefault()}),d.target.classList.contains("color-variants__item")&&(i(d.target.dataset.colorId),s(d.target.dataset.colorId),a(d.target.dataset.colorId),r(d.target.dataset.images.replace(/\s/g,"").split(","),1),e()&&d.target.addEventListener("click",e=>{e.preventDefault(),o(d.target.dataset.colorId)}))},!0),t.addEventListener("mouseout",()=>{i(),s(),clearTimeout(l)}),t.addEventListener("mouseleave",t=>{i(),s(),a(t.target.dataset.productId),e()&&o(),clearTimeout(l)})})}function productPropertiesHandler(){const e=document.querySelector(".product-info__properties"),t=document.querySelector(".product-properties__btn");if(e&&t){const i=e.querySelectorAll(".product-properties__item");t.addEventListener("click",()=>{t.remove(),i.forEach(e=>{e.classList.add("is-active")})})}}function updateTotal(){let e=0,t=0;productsTableRows.forEach(i=>{const s=i.querySelector(".quantity__input").value,a=i.querySelector(".product-price__base").innerHTML.replace(/\s/g,"");e+=Number(s)*a,t+=Number(s)}),productTotalEl.classList.add("is-animated"),productTotalCostEl.innerHTML=e.toLocaleString("ru"),productTotalQuantityEl.innerHTML=t,setTimeout(()=>{productTotalEl.classList.remove("is-animated")},100)}class Accordion{constructor(e){this.el=e,this.items=this.el.querySelectorAll(".accordion__item"),this.disabledOnValue=this.el.dataset.accordionDisabled,this.pointerOffOnValue=this.el.dataset.accordionPointerOff,this.contentNoShow=this.el.classList.contains("accordion--content-no-show"),this.el.dataset.closeAnother<10?this.closeAnotherValue=0:this.closeAnotherValue=this.el.dataset.closeAnother}start(){const e=()=>{this.disabledOnValue&&window.innerWidth>=this.disabledOnValue?(this.el.classList.remove("accordion--enabled"),this.el.classList.add("accordion--disabled")):(this.el.classList.add("accordion--enabled"),this.el.classList.remove("accordion--disabled"))};e();const t=()=>{this.pointerOffOnValue&&window.innerWidth>=this.pointerOffOnValue?this.el.classList.add("accordion--pointeroff"):this.el.classList.remove("accordion--pointeroff")};t();const i=()=>{this.items.forEach(e=>{let t=e.querySelector(".accordion__title");t.addEventListener("click",t=>{t.stopImmediatePropagation(),!this.contentNoShow&&window.innerWidth<768&&t.preventDefault(),window.innerWidth>=this.closeAnotherValue&&this.items.forEach(t=>{t!==e&&t.classList.remove("is-opened")}),e.classList.toggle("is-opened")})})};i(),window.addEventListener("resize",function(){e(),t(),i()})}}const accordions=document.querySelectorAll(".accordion");accordions&&accordions.forEach(e=>{let t=new Accordion(e);t.start()});const brandFilter=document.querySelector(".brand-filter");if(brandFilter){const e=brandFilter.querySelectorAll(".titles__item"),t=brandFilter.querySelectorAll(".brand-filter-list__item");e&&t&&e.forEach(i=>{i.addEventListener("click",()=>{e.forEach(e=>{e.classList.remove("is-active")}),i.classList.add("is-active"),t.forEach(e=>{e.dataset.filterId==i.dataset.filterTarget?(e.classList.remove("is-hidden"),e.classList.add("is-active")):"all"==i.dataset.filterTarget?e.classList.remove("is-hidden"):(e.classList.remove("is-active"),e.classList.add("is-hidden"))})})})}let checkSizes,drags=document.querySelectorAll(".drags input"),resultBra=document.querySelector(".bust-result__bra span"),resultSlip=document.querySelector(".bust-result__slip span"),bustSize=90,underBustSize=70,hipsSize=90;if(drags.length>0){drags.forEach(e=>{let t=e.closest(".drag-range").querySelector(".drag-range__value");e.addEventListener("input",()=>{t.innerText=e.value,checkSizes({title:e.name,value:e.value})})}),checkSizes=function(i){let s=[],a=[];switch(i.title){case"bust":bustSize=i.value;break;case"underbust":underBustSize=i.value;break;case"hips":hipsSize=i.value}"bust"!=i.title&&"underbust"!=i.title||(e.forEach(e=>{underBustSize>=e.min&&underBustSize<=e.max&&e.bustSizes.forEach(t=>{bustSize>=t.min&&bustSize<=t.max&&s.push(e.title+t.title)})}),s.length>0?(resultBra.classList.add("is-animated"),resultBra.innerHTML=s.join(" или "),setTimeout(()=>{resultBra.classList.remove("is-animated")},200)):resultBra.innerHTML="Нет соответствий"),"hips"==i.title&&(t.forEach(e=>{hipsSize>=e.min&&hipsSize<=e.max&&a.push(e.title)}),a.length>0?(resultSlip.classList.add("is-animated"),resultSlip.innerHTML=a.join(" или "),setTimeout(()=>{resultSlip.classList.remove("is-animated")},200)):resultSlip.innerHTML="Нет соответствий")};let e=[{min:63,max:67,title:65,bustSizes:[{min:75,max:77,title:"AA"},{min:77,max:79,title:"A"},{min:79,max:81,title:"B"},{min:81,max:83,title:"C"},{min:83,max:85,title:"D"},{min:85,max:87,title:"E"},{min:87,max:89,title:"F"},{min:89,max:91,title:"G"},{min:91,max:93,title:"H"},{min:93,max:95,title:"I"},{min:95,max:97,title:"J"}]},{min:68,max:72,title:70,bustSizes:[{min:80,max:82,title:"AA"},{min:82,max:84,title:"A"},{min:84,max:86,title:"B"},{min:86,max:88,title:"C"},{min:88,max:90,title:"D"},{min:90,max:92,title:"E"},{min:92,max:94,title:"F"},{min:94,max:96,title:"G"},{min:96,max:98,title:"H"},{min:98,max:100,title:"I"},{min:100,max:102,title:"J"}]},{min:73,max:77,title:75,bustSizes:[{min:85,max:87,title:"AA"},{min:87,max:89,title:"A"},{min:89,max:91,title:"B"},{min:91,max:93,title:"C"},{min:93,max:95,title:"D"},{min:95,max:97,title:"E"},{min:97,max:99,title:"F"},{min:99,max:101,title:"G"},{min:101,max:103,title:"H"},{min:103,max:105,title:"I"},{min:105,max:107,title:"J"}]},{min:78,max:82,title:80,bustSizes:[{min:90,max:92,title:"AA"},{min:92,max:94,title:"A"},{min:94,max:96,title:"B"},{min:96,max:98,title:"C"},{min:98,max:100,title:"D"},{min:100,max:102,title:"E"},{min:102,max:104,title:"F"},{min:104,max:106,title:"G"},{min:106,max:108,title:"H"},{min:108,max:110,title:"I"},{min:110,max:112,title:"J"}]},{min:83,max:87,title:85,bustSizes:[{min:95,max:97,title:"AA"},{min:97,max:99,title:"A"},{min:99,max:101,title:"B"},{min:101,max:103,title:"C"},{min:103,max:105,title:"D"},{min:105,max:107,title:"E"},{min:107,max:109,title:"F"},{min:109,max:111,title:"G"},{min:111,max:113,title:"H"},{min:113,max:115,title:"I"},{min:115,max:117,title:"J"}]},{min:88,max:92,title:90,bustSizes:[{min:100,max:102,title:"AA"},{min:102,max:104,title:"A"},{min:104,max:106,title:"B"},{min:106,max:108,title:"C"},{min:108,max:110,title:"D"},{min:110,max:112,title:"E"},{min:112,max:114,title:"F"},{min:114,max:116,title:"G"},{min:116,max:118,title:"H"},{min:118,max:120,title:"I"},{min:120,max:122,title:"J"}]},{min:93,max:97,title:95,bustSizes:[{min:107,max:109,title:"A"},{min:109,max:111,title:"B"},{min:111,max:113,title:"C"},{min:113,max:115,title:"D"},{min:115,max:117,title:"E"},{min:117,max:119,title:"F"},{min:119,max:121,title:"G"},{min:121,max:123,title:"H"},{min:123,max:125,title:"I"},{min:125,max:127,title:"J"}]},{min:98,max:102,title:100,bustSizes:[{min:112,max:114,title:"A"},{min:114,max:116,title:"B"},{min:116,max:118,title:"C"},{min:118,max:120,title:"D"},{min:120,max:122,title:"E"},{min:122,max:124,title:"F"},{min:124,max:126,title:"G"},{min:126,max:128,title:"H"},{min:128,max:130,title:"I"},{min:130,max:132,title:"J"}]},{min:103,max:107,title:105,bustSizes:[{min:117,max:119,title:"A"},{min:119,max:121,title:"B"},{min:121,max:123,title:"C"},{min:123,max:125,title:"D"},{min:125,max:127,title:"E"},{min:127,max:129,title:"F"},{min:129,max:131,title:"G"},{min:131,max:133,title:"H"},{min:133,max:135,title:"I"},{min:135,max:137,title:"J"}]},{min:108,max:112,title:110,bustSizes:[{min:122,max:124,title:"A"},{min:124,max:126,title:"B"},{min:126,max:128,title:"C"},{min:128,max:130,title:"D"},{min:130,max:132,title:"E"},{min:132,max:134,title:"F"},{min:134,max:136,title:"G"},{min:136,max:138,title:"H"},{min:138,max:140,title:"I"},{min:140,max:142,title:"J"}]},{min:113,max:117,title:115,bustSizes:[{min:129,max:131,title:"B"},{min:131,max:133,title:"C"},{min:133,max:135,title:"D"},{min:135,max:137,title:"E"},{min:137,max:139,title:"F"},{min:139,max:141,title:"G"},{min:141,max:143,title:"H"},{min:143,max:145,title:"I"},{min:145,max:147,title:"J"}]},{min:118,max:122,title:120,bustSizes:[{min:134,max:136,title:"B"},{min:136,max:138,title:"C"},{min:138,max:140,title:"D"},{min:140,max:142,title:"E"},{min:142,max:144,title:"F"},{min:144,max:146,title:"G"},{min:146,max:148,title:"H"},{min:148,max:150,title:"I"},{min:150,max:152,title:"J"}]}],t=[{min:85,max:87,title:"86/XS"},{min:88,max:88,title:"86/XS или 94/M"},{min:89,max:91,title:"90/S"},{min:92,max:92,title:"90/S или 94/M"},{min:93,max:95,title:"94/M"},{min:96,max:96,title:"94/M или 98/L"},{min:97,max:99,title:"98/L"},{min:100,max:100,title:"98/L или 102/XL"},{min:101,max:103,title:"102/XL"},{min:104,max:104,title:"102/XL или 106/XXL"},{min:105,max:107,title:"106/XXL"},{min:108,max:108,title:"106/XXL или 110/3XL"},{min:109,max:111,title:"110/3XL"},{min:112,max:112,title:"110/3XL или 114/4XL"},{min:113,max:115,title:"114/4XL"},{min:116,max:116,title:"114/4XL или 118/5XL"},{min:117,max:119,title:"118/5XL"}];checkSizes({title:"bust",value:bustSize}),checkSizes({title:"underbust",value:underBustSize}),checkSizes({title:"hips",value:hipsSize})}const cartProductItems=document.querySelectorAll(".list-product");cartProductItems.length>0&&cartProductItems.forEach(e=>{let t=e.querySelectorAll(".list-table tbody tr"),i=e.querySelector('[data-action="show-not-added"]');t.length>0&&t.forEach(e=>{e.querySelector(".list-table__total"),e.querySelector(".list-table__price")}),i&&(t.length>0?i.addEventListener("click",()=>{i.classList.toggle("is-active"),t.forEach(e=>{e.classList.toggle("is-showed")})}):i.style.display="none")});const cartPromocodeBtn=document.querySelector('[data-action="promocode-btn"]');cartPromocodeBtn&&cartPromocodeBtn.addEventListener("click",()=>{cartPromocodeBtn.classList.add("is-active")});const cartBonusBtn=document.querySelector('[data-action="bonus-btn"]');cartBonusBtn&&cartBonusBtn.addEventListener("click",()=>{cartBonusBtn.classList.add("is-active")}),productFavoritesHandler();const formsNeedCheck=document.querySelectorAll("form[data-check]");formsNeedCheck.forEach(e=>{checkForm(e)});const allInputs=document.querySelectorAll("form input");allInputs.length>0&&checkEmpty(allInputs);const settingSelects=document.querySelectorAll(".setting-select");settingSelects.length>0&&settingSelects.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("is-active")});let t=e.querySelectorAll(".setting-select__item");t.forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("is-active")||(t.forEach(e=>{e.classList.remove("is-active")}),e.classList.add("is-active"))})})});const addressEqualEl=document.querySelector('[data-action="address-equal"]');if(addressEqualEl){const e=addressEqualEl.closest(".setting__content").querySelector(".form-minimal");e.classList.add("is-hidden"),addressEqualEl.addEventListener("click",()=>{e.classList.toggle("is-hidden")})}const registrationForm=document.querySelector(".form--registration");let innCheck;if(registrationForm){let e=registrationForm.querySelector('input[type="hidden"]'),t=document.querySelectorAll(".tabs-variants .tabs-titles__item"),i=document.getElementById("registration-inn"),s=i.closest(".form-row");innCheck=function(e){"type3"==e?(i.setAttribute("data-check","true"),s.style.display="flex"):(i.removeAttribute("data-check"),s.style.display="none")},innCheck("type1"),t.forEach(t=>{t.addEventListener("click",()=>{let i=t.dataset.tabTarget;e.value=i,innCheck(i),checkForm(registrationForm)})})}const orderDeliveryInfo=document.querySelector("[data-delivery-content]");let deliveryCheck,modalMapStatus,initmap;if(orderDeliveryInfo){let e=document.querySelectorAll("[data-delivery-select] .tabs-titles__item"),t=document.querySelector("[data-check-delivery-type]");deliveryCheck=function(e){orderDeliveryInfo.style.display="type2"==e||"type3"==e?"block":"none",t.classList.remove("is-disabled")},e.forEach(t=>{t.addEventListener("click",()=>{let i=t.dataset.tabTarget;e.forEach(e=>e.classList.remove("is-active")),t.classList.add("is-active"),deliveryCheck(i)})})}Fancybox.bind("[data-fancybox]",{infinite:!1,dragToClose:!1,groupAll:!1,placeFocusBack:!1,l10n:{CLOSE:"Закрыть",NEXT:"Вперед",PREV:"Назад",MODAL:"Можно закрыть, нажав ESC",ERROR:"Ошибка",IMAGE_ERROR:"Изображение не найдено",ELEMENT_NOT_FOUND:"HTML не найден",AJAX_NOT_FOUND:"Ошибка при загрузке AJAX: Not Found",AJAX_FORBIDDEN:"Ошибка при загрузке AJAX: Forbidden",IFRAME_ERROR:"Ошибка при загрузке"},template:{closeButton:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 20L4 4m16 0L4 20"/></svg>'}}),Fancybox.bind("[data-fancybox='product']",{dragToClose:!1,groupAll:!1,groupAttr:!1,l10n:{CLOSE:"Закрыть",NEXT:"Вперед",PREV:"Назад",MODAL:"Можно закрыть, нажав ESC",ERROR:"Ошибка",IMAGE_ERROR:"Изображение не найдено",ELEMENT_NOT_FOUND:"HTML не найден",AJAX_NOT_FOUND:"Ошибка при загрузке AJAX: Not Found",AJAX_FORBIDDEN:"Ошибка при загрузке AJAX: Forbidden",IFRAME_ERROR:"Ошибка при загрузке"}}),document.getElementById("js-map1")&&(initmap=function(){let e;e||(e=new ymaps.Map("js-map1",{center:[55.778036,37.7365],zoom:15},{searchControlProvider:"yandex#search"}),e.geoObjects.add(new ymaps.Placemark([55.778036,37.7365],{balloonContent:"ул. Вольная, д. 35, стр. 8",iconCaption:"OptMoyo.ru"},{preset:"islands#redDotIconWithCaption"})),e.behaviors.disable("scrollZoom"))},ymaps.ready(initmap));const documentBody=document.querySelector("body"),menuСatalogWrapper=document.querySelector(".menu-catalog"),menuСatalogBtnOpen=document.querySelector(".menu-catalog__btn-open");let subcategoriesLinks,subcategoryMenuCloned,menuCatalogClose,menuCatalogIsLoaded=!1;const getMenuCatalog=()=>{let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){menuСatalogWrapper.innerHTML=e.responseText;let t=document.querySelectorAll(".menu-catalog .accordion");t&&t.forEach(e=>{let t=new Accordion(e);t.start()}),subcategoriesLinks=document.querySelectorAll(".subcategories__link"),subcategoryMenuCloned=document.querySelector(".subcategory-menu-cloned"),subcategoriesLinks.forEach(e=>{function t(){document.body.clientWidth>=768?(s&&s.classList.add("accordion--content-no-show"),e.addEventListener("mouseover",()=>{a?(subcategoriesLinks.forEach(e=>{e.classList.remove("is-active")}),e.classList.add("is-active"),subcategoryMenuCloned.classList.add("is-active"),subcategoryMenuCloned.innerHTML="",subcategoryMenuCloned.appendChild(i)):(subcategoriesLinks.forEach(e=>{e.classList.remove("is-active")}),subcategoryMenuCloned.classList.remove("is-active"))})):s&&s.classList.remove("accordion--content-no-show")}let i,s=e.closest(".subcategories.accordion"),a=e.closest(".subcategories__item").querySelector(".subcategory-menu");if(t(),window.addEventListener("resize",()=>{t()}),a){i=a.cloneNode(!0);let t=e.closest(".subcategories__item").querySelector(".subcategory-menu"),s=document.createElement("a");s.classList.add("subcategory-menu__item"),s.classList.add("subcategory-menu__item--special"),s.setAttribute("href",e.getAttribute("href")),s.innerHTML="Все подкатегории",t.insertBefore(s,t.querySelector(".subcategory-menu__item"))}})}},e.open("GET","ajax-menu-catalog.html"),e.send(),menuCatalogIsLoaded=!0};menuСatalogWrapper&&(menuСatalogBtnOpen.addEventListener("click",()=>{menuCatalogIsLoaded||getMenuCatalog(),menuСatalogWrapper.classList.add("is-showed"),documentBody.classList.add("body-overlay")}),menuCatalogClose=function(){menuСatalogWrapper.classList.remove("is-showed"),subcategoryMenuCloned.classList.remove("is-active"),documentBody.classList.remove("body-overlay")},menuСatalogWrapper.addEventListener("click",e=>{e.target.className.includes("menu-catalog")&&menuCatalogClose()}));const menuFilterBtn=document.getElementById("btn-filter"),menuFilterBlock=document.querySelector(".menu-filters"),menuFilterWrapper=document.querySelector(".menu-filters-wrapper"),menuFilterCloseBtn=document.querySelector(".menu-filters__close"),menuFilterCheckboxItems=document.querySelectorAll(".filter-checkbox__item input"),selectedFiltersWrapper=document.querySelector(".filters-selected"),menuFiltersApplyBtn=document.querySelector(".menu-filters__apply");let menuFilterIsActive=!1;const menuFilterOpen=function(){menuFilterIsActive=!0,menuFilterBtn.classList.add("is-active"),menuFilterWrapper.classList.add("is-active"),menuFilterBlock.classList.add("is-active")},menuFilterClose=function(){menuFilterIsActive=!1,menuFilterBtn.classList.remove("is-active"),menuFilterWrapper.classList.remove("is-active"),menuFilterBlock.classList.remove("is-active")};menuFilterBtn&&menuFilterBtn.addEventListener("click",()=>{menuFilterIsActive?menuFilterClose():menuFilterOpen()}),menuFilterCloseBtn&&menuFilterCloseBtn.addEventListener("click",()=>{menuFilterClose()}),menuFilterWrapper&&menuFilterWrapper.addEventListener("click",e=>{let t=e.target.className;t.includes("menu-filters-wrapper")&&menuFilterClose()}),menuFiltersApplyBtn&&menuFiltersApplyBtn.addEventListener("click",()=>{menuFilterClose()}),menuFilterCheckboxItems&&menuFilterCheckboxItems.forEach(e=>{let t;e.parentNode.querySelector(".filter-checkbox__title")&&(t=e.parentNode.querySelector(".filter-checkbox__title").innerHTML),e.addEventListener("change",()=>{if(e.checked){let i=document.createElement("a");i.classList.add("filters-selected__item"),i.dataset.id=e.id,i.innerHTML=t,selectedFiltersWrapper.appendChild(i);let s=selectedFiltersWrapper.querySelectorAll(".filters-selected__item");s.forEach(e=>{e.addEventListener("click",()=>{e.parentNode.removeChild(e),Array.prototype.map.call(menuFilterCheckboxItems,t=>{t.id==e.dataset.id&&(t.checked=!1)})})})}else{let t=selectedFiltersWrapper.querySelectorAll(".filters-selected__item");Array.prototype.map.call(t,t=>{t.dataset.id==e.id&&t.parentNode.removeChild(t)})}})});const menuUser=document.querySelector(".menu-user");if(menuUser){const e=menuUser.querySelector(".menu-user__icon");e&&(e.addEventListener("click",e=>{document.body.clientWidth<=1200&&e.preventDefault(),menuUser.classList.toggle("is-active"),menuTop.classList.remove("is-active"),menuTopBtn.classList.remove("is-active")}),window.addEventListener("resize",()=>{document.body.clientWidth>1200&&menuUser.classList.remove("is-active")}))}const menuTop=document.querySelector(".menu-top"),menuTopBtn=document.querySelector(".menu-top__btn");menuTop&&(menuTopBtn.addEventListener("click",e=>{e.preventDefault(),menuTop.classList.toggle("is-active"),menuTopBtn.classList.toggle("is-active"),menuUser.classList.remove("is-active")}),window.addEventListener("resize",()=>{document.body.clientWidth>=1200&&(menuTop.classList.remove("is-active"),menuTopBtn.classList.remove("is-active"))})),getProductsCards();const productFeedbackItems=document.querySelectorAll(".feedback-messages__item"),productFeedbackAllBtn=document.querySelector(".product-feedback__all");productFeedbackItems&&productFeedbackItems.length>2&&(productFeedbackAllBtn.classList.add("is-showed"),productFeedbackAllBtn.addEventListener("click",()=>{productFeedbackAllBtn.classList.toggle("is-active"),productFeedbackItems.forEach(e=>{e.classList.toggle("is-showed")})}));const productFeedbackForm=document.querySelector(".feedback-form"),productFeedbackAddBtn=document.querySelector(".product-feedback__add");productFeedbackForm&&productFeedbackAddBtn&&productFeedbackAddBtn.addEventListener("click",()=>{productFeedbackForm.classList.toggle("is-active"),productFeedbackAddBtn.classList.toggle("is-active")});const dropArea=document.querySelector(".form-file");let preventDefaults,dropAreaHighlight,dropAreaUnhighlight,dropHandle,handleFiles,uploadFile,previewFile;dropArea&&(["dragenter","dragover","dragleave","drop"].forEach(e=>{dropArea.addEventListener(e,preventDefaults,!1)}),dropArea.addEventListener("dragenter",dropAreaHighlight,!1),dropArea.addEventListener("dragover",dropAreaHighlight,!1),dropArea.addEventListener("dragleave",dropAreaUnhighlight,!1),dropArea.addEventListener("drop",dropAreaUnhighlight,!1),dropArea.addEventListener("drop",dropHandle,!1),preventDefaults=function(e){e.preventDefault(),e.stopPropagation()},dropAreaHighlight=function(){dropArea.classList.add("is-highlight")},dropAreaUnhighlight=function(){dropArea.classList.remove("is-highlight")},dropHandle=function(e){let t=e.dataTransfer,i=t.files;handleFiles(i)},handleFiles=function(e){e=[...e],e.forEach(previewFile)},uploadFile=function(e){let t="ВАШ URL ДЛЯ ЗАГРУЗКИ ФАЙЛОВ",i=new XMLHttpRequest,s=new FormData;i.open("POST",t,!0),i.addEventListener("readystatechange",function(e){4==i.readyState&&200==i.status||4==i.readyState&&i.status}),s.append("file",e),i.send(s)},previewFile=function(e){let t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){let e=document.createElement("img");e.src=t.result,document.querySelector(".form-file-prewiew").appendChild(e)}});const productGallery=document.querySelector(".product-gallery");productGallery&&Fancybox.bind("[data-fancybox='product-gallery']",{Thumbs:!1,placeFocusBack:!1,Carousel:{Dots:!0},Toolbar:{display:["download","close"]},l10n:{CLOSE:"Закрыть",NEXT:"Вперед",PREV:"Назад",DOWNLOAD:"Скачать",ERROR:"Ошибка загрузки контента",IMAGE_ERROR:"Изображение не найдено",ELEMENT_NOT_FOUND:"HTML разметка не найдена"}}),productPropertiesHandler();const ratingLines=document.querySelectorAll(".rating-lines__item");ratingLines&&ratingLines.forEach(e=>{let t=e.dataset.feedbackPercent;e.querySelector(".rating-lines__percent").innerHTML=t,e.querySelector(".rating-lines__value").style.width=t+"%"});const ratingSizesLines=document.querySelectorAll(".rating-sizes__item");ratingSizesLines&&ratingSizesLines.forEach(e=>{let t=e.dataset.feedbackSizePercent;e.querySelector(".rating-sizes__percent").innerHTML=t,e.querySelector(".rating-sizes__value").style.width=t+"%"});const ratingNumberBtn=document.querySelector(".rating-number__btn"),ratingStars=document.querySelector(".rating-stars");ratingNumberBtn&&ratingStars&&(ratingNumberBtn.addEventListener("mouseover",()=>{ratingStars.classList.add("is-active")}),ratingNumberBtn.addEventListener("mouseout",()=>{ratingStars.classList.remove("is-active")}));const productTableQuantityItems=document.querySelectorAll(".product-table .quantity");productTableQuantityItems&&productTableQuantityItems.forEach(e=>{const t=e.querySelector(".quantity__btn--plus"),i=e.querySelector(".quantity__btn--minus"),s=e.querySelector(".quantity__input"),a=s.closest("tr");let r=0;s.addEventListener("change",()=>{updateTotal()}),t.addEventListener("click",()=>{r=Number(s.value)+1,s.value=r,r>=1&&(a.classList.add("is-added"),i.disabled=!1),updateTotal()}),i.addEventListener("click",()=>{r>0&&(r=Number(s.value)-1,s.value=r,i.disabled=!1),0==r&&(a.classList.remove("is-added"),i.disabled=!0),updateTotal()})});const productTotalCostEl=document.querySelector(".product-table__total .after-currency"),productTotalQuantityEl=document.querySelector(".product-table__total .after-pz"),productTotalEl=document.querySelector('[data-action="product-table-total"]'),productTableWrapper=document.querySelector(".product-table-wrapper"),productTableBtn=document.querySelector(".product-table__btn");productTableWrapper&&productTableBtn&&productTableBtn.addEventListener("click",()=>{productTableBtn.classList.toggle("is-active"),productTableWrapper.classList.toggle("is-active")});const scrollToLinks=document.querySelectorAll('[data-action="scroll"]');scrollToLinks&&scrollToLinks.forEach(e=>{e.addEventListener("click",t=>{let i;t.preventDefault(),i=e.getAttribute("href")?e.getAttribute("href"):e.dataset.scrollTarget,document.querySelector(i).scrollIntoView({behavior:"smooth",block:"start"})})});const scrollHereElements=document.querySelectorAll("[data-scroll-onload]");scrollHereElements&&scrollHereElements.forEach(e=>{e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})});const menuTabs=document.querySelector(".menu-tabs");if(menuTabs&&window.innerWidth<768){let e=menuTabs.getBoundingClientRect();window.scrollTo({top:e.bottom-60,left:0,behavior:"smooth"})}const scrollToTopBtn=document.querySelector(".btn-goto");if(scrollToTopBtn){let e;window.addEventListener("scroll",function(){e=window.scrollY/window.innerHeight,e>1?scrollToTopBtn.classList.contains("is-active")||scrollToTopBtn.classList.add("is-active"):scrollToTopBtn.classList.remove("is-active")})}const searchWrapper=document.querySelector(".search");let activeSuggestionsClear,suggestionsMarkerdClear;if(searchWrapper){const e=searchWrapper.querySelector(".search-form"),t=e.querySelector(".search-form__clear"),i=e.querySelector(".search-form__input"),s=document.querySelector(".search__btn");let a=searchWrapper.querySelectorAll(".search-suggestions__item"),r=-1,n="";activeSuggestionsClear=function(){a.forEach(e=>{e.classList.remove("is-active")})},suggestionsMarkerdClear=function(){a.forEach(e=>{let t=e.textContent.toLowerCase();t=t.replaceAll("<b>",""),t=t.replaceAll("</b>",""),e.innerHTML=t})},s.addEventListener("click",e=>{e.preventDefault(),searchWrapper.classList.toggle("is-active"),searchWrapper.classList.toggle("is-focused"),s.classList.toggle("is-active"),i.focus(),menuUser.classList.remove("is-active"),menuTop.classList.remove("is-active"),menuTopBtn.classList.remove("is-active")}),window.addEventListener("resize",()=>{document.body.clientWidth>=1200&&(searchWrapper.classList.remove("is-active"),s.classList.remove("is-active"))}),i.addEventListener("click",()=>{searchWrapper.classList.add("is-focused")}),i.addEventListener("keydown",e=>{a=searchWrapper.querySelectorAll(".search-suggestions__item"),"ArrowDown"!=e.code&&"ArrowUp"!=e.code||(e.preventDefault(),activeSuggestionsClear(),"ArrowDown"==e.code&&(r<a.length-1?r++:r=0),"ArrowUp"==e.code&&(r>0?r--:r=a.length-1),a[r].classList.add("is-active"),n=a[r].textContent,i.value=n.toLowerCase())}),a.forEach((e,t)=>{e.addEventListener("click",()=>{i.value=e.textContent,r=t,i.focus(),activeSuggestionsClear(),e.classList.add("is-active")}),e.addEventListener("mouseover",()=>{r=t,activeSuggestionsClear(),e.classList.add("is-active")})}),i.addEventListener("keyup",()=>{i.value?t.classList.add("is-active"):t.classList.remove("is-active")}),i.addEventListener("keyup",()=>{if(i.value&&i.value.length>1){let e=i.value.toLowerCase();a=searchWrapper.querySelectorAll(".search-suggestions__item"),a.forEach(t=>{let i=t.textContent.toLowerCase();i=i.replaceAll(e,`<b>${e}</b>`),t.innerHTML=i})}else suggestionsMarkerdClear()}),t.addEventListener("click",e=>{e.preventDefault(),i.value="",t.classList.remove("is-active"),i.focus(),suggestionsMarkerdClear()});const o=document.querySelector("body");o.addEventListener("click",e=>{e.target.closest(".search")||e.target.classList.contains("search__btn")||searchWrapper.classList.remove("is-focused"),e.target.closest(".search")||e.target.classList.contains("search__btn")||(searchWrapper.classList.remove("is-active"),s.classList.remove("is-active"))})}let slider=document.querySelector(".slider-products");const checkVisible=function(e){var t={top:window.pageYOffset+e.getBoundingClientRect().top,
left:window.pageXOffset+e.getBoundingClientRect().left,right:window.pageXOffset+e.getBoundingClientRect().right,bottom:window.pageYOffset+e.getBoundingClientRect().bottom},i={top:window.pageYOffset,left:window.pageXOffset,right:window.pageXOffset+document.documentElement.clientWidth,bottom:window.pageYOffset+document.documentElement.clientHeight};t.bottom>i.top&&t.top<i.bottom&&t.right>i.left&&t.left<i.right?e.classList.add("shake"):e.classList.remove("shake")};if(slider&&(window.addEventListener("scroll",function(){checkVisible(slider)}),checkVisible(slider)),document.querySelector(".slider-main")){new Carousel(document.querySelector(".slider-main"),{infinite:!0,Navigation:!1,Dots:!0,friction:.8,slidesPerPage:1,slidesToSlide:1,fill:!0,center:!1})}if(document.querySelector(".slider-category-mini")){new Carousel(document.querySelector(".slider-category-mini.carousel"),{infinite:!1,Navigation:!1,Dots:!1,friction:.89,slidesPerPage:"auto",slidesToSlide:2,fill:!0,center:!1})}if(document.querySelector(".section--posts-brands")){new Carousel(document.querySelector(".section--posts-brands .carousel"),{infinite:!1,Navigation:!1,Dots:!0,friction:.89,slidesPerPage:1,slidesToSlide:1,fill:!0,center:!1})}if(document.querySelector(".section--posts-actions")){new Carousel(document.querySelector(".section--posts-actions .carousel"),{infinite:!1,Navigation:!1,Dots:!0,friction:.89,slidesPerPage:1,slidesToSlide:1,fill:!0,center:!1})}if(document.querySelector(".section-slider-category")){new Carousel(document.querySelector(".section-slider-category .carousel"),{infinite:!1,Navigation:!1,Dots:!1,friction:.89,slidesPerPage:"auto",slidesToSlide:1,fill:!0,center:!1})}if(document.querySelector(".section-slider-brand-category")){new Carousel(document.querySelector(".section-slider-brand-category .carousel"),{infinite:!1,Navigation:!1,Dots:!1,friction:.89,slidesPerPage:"auto",slidesToSlide:1,fill:!0,center:!0})}const slidersProducts=document.querySelectorAll(".slider-products");if(slidersProducts.length>0&&slidersProducts.forEach(e=>{new Carousel(e.querySelector(".products"),{infinite:!1,Navigation:!1,Dots:!0,friction:.89,slidesPerPage:"auto",slidesToSlide:1,fill:!0,center:!1,classNames:{slide:"product-card"}})}),document.querySelector(".brand-filter")){new Carousel(document.querySelector(".brand-filter .titles"),{infinite:!1,Navigation:!1,Dots:!1,friction:.89,slidesPerPage:"auto",slidesToSlide:5,fill:!0,center:!1,dragFree:!0})}let sliderGalleryProduct,sliderThumbsProduct;document.querySelector(".container--page-product")&&(sliderGalleryProduct=new Carousel(document.querySelector(".container--page-product .product-pics.carousel"),{infinite:!0,Navigation:!0,Dots:!1,friction:.85,slidesPerPage:1,slidesToSlide:1,fill:!0,center:!1,placeFocusBack:!1}),sliderThumbsProduct=new Carousel(document.querySelector(".container--page-product .product-thumbs.carousel"),{infinite:!0,Navigation:!0,Dots:!1,friction:.85,slidesPerPage:1,slidesToSlide:1,fill:!0,center:!0,Sync:{target:sliderGalleryProduct,friction:0}}),Fancybox.bind('[data-fancybox="product-pics"]',{infinite:!0,dragToClose:!0,placeFocusBack:!1,Toolbar:{display:[{id:"counter",position:"right"},"download","close"],autoEnable:!1},Thumbs:!1,Carousel:{friction:.75,on:{change:e=>{sliderGalleryProduct.slideTo(sliderGalleryProduct.findPageForSlide(e.page),{friction:0})}}}}));const tabsContainers=document.querySelectorAll('[data-action="tabs"]');tabsContainers.length>0&&tabsContainers.forEach(e=>{let t=e.querySelectorAll(".tabs-content__item"),i=e.querySelectorAll(".tabs-titles__item");i[0].classList.add("is-active"),t[0].classList.add("is-active"),i.forEach(s=>{s.addEventListener("click",a=>{let r=s.dataset.tabTarget;i.forEach(e=>{e.classList.remove("is-active")}),s.classList.add("is-active");let n=e.querySelector(`[data-tab-id="${r}"]`);t.forEach(e=>{e.classList.remove("is-active")}),n.classList.add("is-active")})})});